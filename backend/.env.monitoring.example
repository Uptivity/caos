# =============================================================================
# CAOS CRM Monitoring Configuration
# =============================================================================
# Copy this file to .env and customize values for your environment

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
# Options: error, warn, info, http, verbose, debug, silly
# Production recommendation: info
# Development recommendation: debug

SERVICE_NAME=caos-crm-backend
# Service name used in logs and metrics

# =============================================================================
# PERFORMANCE MONITORING
# =============================================================================
SLOW_REQUEST_THRESHOLD=1000
# Request duration in ms before considering it slow

SLOW_QUERY_THRESHOLD=100
# Database query duration in ms before considering it slow

MAX_SLOW_QUERIES=100
# Maximum number of slow queries to keep in memory

METRICS_RETENTION=3600000
# Metrics retention period in ms (default: 1 hour)

# =============================================================================
# ALERTING THRESHOLDS
# =============================================================================

# Error Rate Thresholds (%)
ERROR_RATE_WARNING_THRESHOLD=5.0
ERROR_RATE_CRITICAL_THRESHOLD=10.0

# Response Time Thresholds (ms)
RESPONSE_TIME_WARNING_THRESHOLD=1000
RESPONSE_TIME_CRITICAL_THRESHOLD=2000

# Database Connection Thresholds (%)
DB_CONNECTION_WARNING_THRESHOLD=80
DB_CONNECTION_CRITICAL_THRESHOLD=90

# Memory Usage Thresholds (%)
MEMORY_WARNING_THRESHOLD=80
MEMORY_CRITICAL_THRESHOLD=90

# CPU Usage Thresholds (%)
CPU_WARNING_THRESHOLD=75
CPU_CRITICAL_THRESHOLD=90

# Alert Configuration
ALERT_SUPPRESSION_WINDOW=300000
# Suppress duplicate alerts for this period (ms) - default 5 minutes

ALERT_CHECK_INTERVAL=60000
# How often to check system health (ms) - default 1 minute

# =============================================================================
# NOTIFICATION CHANNELS
# =============================================================================

# Email Alerts
ENABLE_EMAIL_ALERTS=false
ALERT_EMAIL_FROM=alerts@caos-crm.com
ALERT_EMAIL_TO=admin@company.com,ops@company.com
# Comma-separated list of email addresses

# Webhook Alerts
ENABLE_WEBHOOK_ALERTS=false
ALERT_WEBHOOK_URL=https://your-webhook-service.com/alerts
# HTTP endpoint to receive alert JSON payloads

# Slack Alerts
ENABLE_SLACK_ALERTS=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#alerts
# Slack channel for alerts (include #)

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_TIMEOUT=5000
# Health check timeout in ms

HEALTH_HISTORY_MAX_ENTRIES=100
# Maximum health check history entries to keep

# =============================================================================
# MONITORING ENDPOINTS SECURITY
# =============================================================================
METRICS_AUTH_TOKEN=your-secure-metrics-token
# Optional: Token required to access /api/metrics endpoint
# Leave empty to disable authentication

MONITORING_IP_WHITELIST=127.0.0.1,::1
# Comma-separated list of IPs allowed to access monitoring endpoints
# Leave empty to allow all IPs

# =============================================================================
# PROMETHEUS METRICS CONFIGURATION
# =============================================================================
ENABLE_DEFAULT_METRICS=true
# Include Node.js default metrics (memory, CPU, GC, etc.)

METRICS_UPDATE_INTERVAL=10000
# Default metrics update interval in ms

# Custom histogram buckets for HTTP request duration (seconds)
HTTP_DURATION_BUCKETS=0.001,0.005,0.015,0.05,0.1,0.2,0.3,0.4,0.5,1.0,5.0,10.0

# Custom histogram buckets for database query duration (seconds)
DB_DURATION_BUCKETS=0.001,0.005,0.01,0.025,0.05,0.1,0.25,0.5,1.0,2.5,5.0,10.0

# =============================================================================
# DATABASE MONITORING
# =============================================================================
DB_MONITORING_ENABLED=true
# Enable database query performance tracking

DB_SLOW_QUERY_LOG=true
# Log slow database queries

DB_CONNECTION_POOL_MONITORING=true
# Monitor database connection pool metrics

# =============================================================================
# SECURITY MONITORING
# =============================================================================
SECURITY_EVENTS_LOGGING=true
# Log security-related events

FAILED_AUTH_THRESHOLD=5
# Number of failed auth attempts before alerting

RATE_LIMIT_MONITORING=true
# Monitor and alert on rate limit hits

# =============================================================================
# BUSINESS METRICS
# =============================================================================
BUSINESS_EVENTS_TRACKING=true
# Track business events (leads created, campaigns sent, etc.)

API_USAGE_ANALYTICS=true
# Track API endpoint usage statistics

# =============================================================================
# DEVELOPMENT/DEBUG SETTINGS
# =============================================================================
DEBUG_METRICS=false
# Log detailed metrics information (development only)

DISABLE_ALERTING=false
# Completely disable alerting (useful for development)

MOCK_NOTIFICATIONS=true
# Log notifications instead of sending them (development)

# =============================================================================
# EXAMPLE PRODUCTION CONFIGURATION
# =============================================================================
# For production environments, consider these settings:
#
# LOG_LEVEL=info
# ERROR_RATE_WARNING_THRESHOLD=3.0
# ERROR_RATE_CRITICAL_THRESHOLD=7.0
# RESPONSE_TIME_WARNING_THRESHOLD=800
# RESPONSE_TIME_CRITICAL_THRESHOLD=1500
# ENABLE_EMAIL_ALERTS=true
# ENABLE_SLACK_ALERTS=true
# ALERT_SUPPRESSION_WINDOW=600000  # 10 minutes
# ALERT_CHECK_INTERVAL=30000       # 30 seconds
# MOCK_NOTIFICATIONS=false